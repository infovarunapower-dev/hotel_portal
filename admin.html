<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin Dashboard ‚Äì Clean UI</title>

<style>
/* ==== BASE ==== */
*{box-sizing:border-box;font-family:Inter,Arial;margin:0;padding:0}
body{background:#f4f6fa;color:#1e293b;font-size:14px}

/* ==== HEADER ==== */
header{
  background:#2563eb;color:#fff;height:52px;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 18px;position:sticky;top:0;z-index:50;
}
header .left{font-weight:700;font-size:16px}
header a{color:#fff;text-decoration:none;font-size:13px;margin-left:14px}

/* ==== LAYOUT ==== */
.layout{display:flex;min-height:calc(100vh - 52px)}

/* ==== SIDEBAR ==== */
.sidebar{
  width:210px;background:#fff;border-right:1px solid #e5e7eb;
  padding:14px 12px;display:flex;flex-direction:column;gap:4px;
}
.sidebar h3{
  font-size:13px;font-weight:700;color:#64748b;margin-bottom:8px
}
.sb-item{
  padding:10px 12px;border-radius:6px;cursor:pointer;
  display:flex;align-items:center;gap:8px;font-size:13.5px;
  color:#334155;
}
.sb-item:hover{background:#f1f5f9}
.sb-item.active{background:#2563eb;color:#fff}
#quickstats{font-size:12px;color:#64748b;margin-top:auto;padding-top:8px}

/* ==== MAIN ==== */
main{flex:1;padding:16px}

/* ==== FILTER BAR ==== */
.filters{
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:12px
}
.filters input, .filters select{
  padding:7px 10px;border-radius:6px;border:1px solid #d0d7e2;
  background:#fff;font-size:13px
}
.filters input{width:200px}

/* ==== CARDS ==== */
.cards{
  display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap
}
.card{
  background:#fff;padding:12px;border-radius:8px;flex:1;min-width:120px;
  box-shadow:0 2px 6px rgba(0,0,0,0.04)
}
.card .label{font-size:11px;color:#64748b;text-transform:uppercase}
.card .num{font-size:18px;font-weight:700;margin-top:4px}

/* ==== TABLE ==== */
.table-box{
  background:#fff;border-radius:10px;overflow:hidden;border:1px solid #e2e8f0
}
table{width:100%;border-collapse:collapse;font-size:13px}
thead th{
  background:#f8fafc;padding:10px;color:#64748b;font-weight:600;
  border-bottom:1px solid #e2e8f0
}
tbody td{
  padding:10px;border-bottom:1px solid #f1f5f9;vertical-align:middle
}
tbody tr:hover td{background:#f8fafc}

/* ==== BADGES ==== */
.status{
  font-size:11px;font-weight:700;padding:5px 8px;border-radius:999px;color:#fff
}
.Pending{background:#6b7280}
.Assigned{background:#2563eb}
["In Progress"]{background:#f59e0b}
.Completed{background:#16a34a}
.Ignored{background:#94a3b8}

/* ==== ACTIONS ==== */
.action-wrap{display:flex;gap:6px;flex-wrap:wrap}
.action-wrap select{
  padding:6px;border-radius:6px;border:1px solid #d0d7e2;font-size:12px
}
.btn{
  padding:6px 10px;border:0;border-radius:6px;font-size:12px;color:#fff;
  cursor:pointer
}
.btn-assign{background:#10b981}
.btn-start{background:#f59e0b}
.btn-complete{background:#16a34a}
.btn-ignore{background:#64748b}

/* ==== RESPONSIVE ==== */
@media (max-width:900px){
  .sidebar{display:none}
  main{padding:12px}
}
</style>
</head>

<body>

<header>
  <div class="left">Admin Dashboard</div>
  <div>
    <a href="index.html">Home</a>
    <a href="login.html">Logout</a>
  </div>
</header>

<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h3>ADMIN MENU</h3>

    <div class="sb-item" data-go="analytics">üìä Analytics</div>
    <div class="sb-item active" data-go="dashboard">üìã Dashboard</div>
    <div class="sb-item" data-go="addstaff">‚ûï Add Staff</div>
    <div class="sb-item" data-go="addfood">üçΩ Food Menu</div>
    <div class="sb-item" data-go="settings">‚öô Settings</div>

    <div id="quickstats">Requests: 0 ‚Ä¢ Assigned: 0 ‚Ä¢ Ignored: 0</div>
  </aside>

  <!-- MAIN -->
  <main>

    <!-- FILTER BAR -->
    <div class="filters">
      <input id="search" placeholder="Search..."/>
      <select id="staffFilter"><option value="">All Staff</option></select>
      <select id="catFilter">
        <option value="">All Categories</option>
        <option>Housekeeping</option><option>Travel</option><option>Food</option>
      </select>
      <select id="statusFilter">
        <option value="">All Status</option>
        <option>Pending</option><option>Assigned</option>
        <option>In Progress</option><option>Completed</option><option>Ignored</option>
      </select>
    </div>

    <!-- CARDS -->
    <div class="cards" id="cards"></div>

    <!-- TABLE -->
    <div class="table-box">
      <table id="reqTable">
        <thead>
          <tr>
            <th>#</th><th>Category</th><th>Summary</th>
            <th>Guest</th><th>Room</th><th>Time</th>
            <th>Status</th><th>Staff</th><th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </main>

</div>

<script>
/* ====================================================
   UTIL STORAGE
==================================================== */
function getReq(){ return JSON.parse(localStorage.getItem("requests")||"[]"); }
function setReq(d){ localStorage.setItem("requests",JSON.stringify(d)); }
function getStaff(){
  let s=JSON.parse(localStorage.getItem("staffList")||"[]");
  return s.map(x => ({name:x.name,category:x.category||"Housekeeping"}));
}
function setStaff(a){ localStorage.setItem("staffList",JSON.stringify(a)); }

/* ====================================================
   INIT FILTERS
==================================================== */
function loadStaffFilter(){
  const out = getStaff().map(s => 
    `<option value="${s.name}">${s.name} (${s.category})</option>`
  ).join("");
  document.getElementById("staffFilter").innerHTML =
    `<option value="">All Staff</option>${out}`;
}
loadStaffFilter();

/* ====================================================
   RENDER CARDS
==================================================== */
function renderCards(){
  const r=getReq();
  const pending=r.filter(x=>x.status==="Pending").length;
  const assigned=r.filter(x=>x.status==="Assigned").length;
  const prog=r.filter(x=>x.status==="In Progress").length;
  const comp=r.filter(x=>x.status==="Completed").length;
  const ign=r.filter(x=>x.status==="Ignored").length;

  document.getElementById("quickstats").innerText=
    `Requests: ${r.length} ‚Ä¢ Assigned: ${assigned} ‚Ä¢ Ignored: ${ign}`;

  document.getElementById("cards").innerHTML = `
    <div class="card"><div class="label">Total</div><div class="num">${r.length}</div></div>
    <div class="card"><div class="label">Pending</div><div class="num">${pending}</div></div>
    <div class="card"><div class="label">Assigned</div><div class="num">${assigned}</div></div>
    <div class="card"><div class="label">In Progress</div><div class="num">${prog}</div></div>
    <div class="card"><div class="label">Completed</div><div class="num">${comp}</div></div>
    <div class="card"><div class="label">Ignored</div><div class="num">${ign}</div></div>
  `;
}

/* ====================================================
   TABLE RENDER
==================================================== */
function renderTable(){
  const r=getReq();
  const body=document.querySelector("#reqTable tbody");
  const q=document.getElementById("search").value.toLowerCase();
  const sf=document.getElementById("staffFilter").value;
  const cf=document.getElementById("catFilter").value;
  const st=document.getElementById("statusFilter").value;

  body.innerHTML="";

  r.slice().reverse().forEach((x,idx)=>{
    if(q && !JSON.stringify(x).toLowerCase().includes(q)) return;
    if(sf && x.assigned_to!==sf) return;
    if(cf && x.type!==cf) return;
    if(st && x.status!==st) return;

    const i=r.length-idx;

    let act="";
    const cleanType = (x.type||"").toLowerCase();
    const staffList = getStaff().filter(
      s => s.category.toLowerCase() === cleanType
    );

    if(!x.assigned_to || x.status==="Pending" || x.status==="Ignored"){
      let opts = staffList.map(s=>`<option>${s.name}</option>`).join("");
      act = `
        <select class="as" data-i="${i}">
          <option value="">Assign staff</option>${opts}
        </select>
        <button class="btn btn-assign" data-assign="${i}">Assign</button>
      `;
    } else if(x.status==="Assigned"){
      act = `
        <button class="btn btn-start" data-start="${i}">Start</button>
        <button class="btn btn-ignore" data-ignore="${i}">Ignore</button>
      `;
    } else if(x.status==="In Progress"){
      act = `
        <button class="btn btn-complete" data-complete="${i}">Complete</button>
        <button class="btn btn-ignore" data-ignore="${i}">Ignore</button>
      `;
    } else {
      act = `<span style="font-size:12px;color:#64748b">‚Äî</span>`;
    }

    body.innerHTML += `
      <tr>
        <td>${i}</td>
        <td>${x.type}</td>
        <td><b>${x.service||"-"}</b> ${x.details?("‚Äî "+x.details):""}</td>
        <td>${x.name||"Guest"}</td>
        <td>${x.room}</td>
        <td>${x.time}</td>
        <td><span class="status ${x.status}">${x.status}</span></td>
        <td>${x.assigned_to||"-"}</td>
        <td class="action-wrap">${act}</td>
      </tr>
    `;
  });

  renderCards();
}

/* ====================================================
   ACTIONS
==================================================== */
document.addEventListener("click",e=>{
  const r=getReq();
  const t=e.target;

  // Assign
  if(t.dataset.assign){
    const idx = Number(t.dataset.assign)-1;
    const sel=document.querySelector(`select.as[data-i="${idx+1}"]`);
    if(!sel.value){alert("Select staff");return;}
    r[idx].assigned_to = sel.value;
    r[idx].status = "Assigned";
    setReq(r); renderTable();
  }

  // Start
  if(t.dataset.start){
    const idx=Number(t.dataset.start)-1;
    r[idx].status="In Progress";
    setReq(r); renderTable();
  }

  // Complete
  if(t.dataset.complete){
    const idx=Number(t.dataset.complete)-1;
    r[idx].status="Completed";
    setReq(r); renderTable();
  }

  // Ignore
  if(t.dataset.ignore){
    const idx=Number(t.dataset.ignore)-1;
    r[idx].status="Ignored";
    setReq(r); renderTable();
  }
});

/* ====================================================
   FILTERS
==================================================== */
["search","staffFilter","catFilter","statusFilter"].forEach(id=>{
  document.getElementById(id).addEventListener("input",renderTable);
});

/* ====================================================
   INIT
==================================================== */
renderTable();
</script>

</body>
</html>
